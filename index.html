<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>LED Ekran Hesaplayıcı – CM + Logo + Sıfırla</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{--bg:#f7f9fc;--card:#fff;--accent:#0066ff;--text:#222}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
body{margin:0;background:var(--bg);color:var(--text);padding:1rem}
header{background:var(--card);padding:1rem;border-radius:8px;margin-bottom:1rem;text-align:center; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:1rem}
#logo{height:50px}
#adHead{min-height:90px;background:#eef;border:dashed 2px #ccd;line-height:90px;color:#556;font-size:12px}
h1{margin:0 0 .5rem;font-size:1.4rem}
button{cursor:pointer;border:none;border-radius:4px;padding:.6rem 1rem;background:var(--accent);color:#fff;font-size:1rem}
button:hover{filter:brightness(1.1)}
label{display:block;margin:.6rem 0 .2rem;font-weight:600}
input,select{width:100%;padding:.55rem;border:1px solid #bbb;border-radius:4px}
.card{background:var(--card);padding:1rem;border-radius:8px;margin-bottom:1rem}
.row{display:flex;gap:1rem;flex-wrap:wrap}
.col{flex:1 1 220px}
#summary{background:var(--card);padding:1rem;border-radius:8px;position:sticky;top:.5rem}
table{width:100%;border-collapse:collapse;margin-top:.5rem;font-size:.9rem}
th,td{padding:.4rem;text-align:left;border-bottom:1px solid #e0e0e0}
th{background:#f1f5f9}
@media print{header,#adHead,.noPrint{display:none}}
</style>
</head>
<body>

<header>
  <!--  LOGO  -->
  <img id="logo" src="G7_logo_lacivert.png" alt="G7 Logo">
  <div>
    <h1>LED Ekran Hesaplayıcı</h1>
    <div id="adHead">Reklam Alanı – 728×90</div>
  </div>
</header>

<div class="row">
  <div class="col">
    <div class="card">
      <h3>1) Kullanım Yeri</h3>
      <label>İç Mekân mı Dış Mekân mı?</label>
      <select id="mekanSec"><option value="indoor">İç Mekân</option><option value="outdoor">Dış Mekân</option></select>
    </div>
    <div class="card">
      <h3>2) Piksel Aralığı Seçin</h3>
      <label>Modül</label><select id="modul"></select>
    </div>
    <div class="card">
      <h3>3) Ekran Boyutu (cm)</h3>
      <label>En (cm)</label><input type="number" id="enCm" min="10" step="1" value="320">
      <label>Boy (cm)</label><input type="number" id="boyCm" min="10" step="1" value="192">
      <button id="addWall">Add Wall</button>
      <button id="resetBtn" style="margin-left:.5rem;background:#e53942">Sıfırla</button>
    </div>
  </div>

  <div class="col" id="summary">
    <h3>Teklif Özeti</h3>
    <table id="sumTable">
      <thead><tr><th>Parça</th><th>Adet</th><th>Birim Fiyat</th><th>Tutar</th></tr></thead>
      <tbody></tbody>
      <tfoot style="font-weight:600"><tr><td colspan="3">TOPLAM</td><td id="grandTotal">$0</td></tr></tfoot>
    </table>
    <button id="printBtn" class="noPrint">PDF / Yazdır</button>
  </div>
</div>

<script>
/* ===== 1) MODÜL + NOVASTAR VERİSİ (önceki) ===== */
const DB = [
  {pitch:0.9, px:320, py:180, mw:30.0, mh:16.875, watt:22, cost:180, brightness:650,  type:'indoor', marka:'Qiangli', name:'P0.9 300×168.75 mm'},
  {pitch:1.2, px:240, py:135, mw:30.0, mh:16.875, watt:20, cost:140, brightness:700,  type:'indoor', marka:'Qiangli', name:'P1.2 300×168.75 mm'},
  {pitch:1.5, px:192, py:108, mw:30.0, mh:16.875, watt:18, cost:115, brightness:800,  type:'indoor', marka:'Qiangli', name:'P1.5 300×168.75 mm'},
  {pitch:1.8, px:172, py:86,  mw:32.0, mh:16.0,   watt:17, cost:95,  brightness:1000, type:'indoor', marka:'Qiangli', name:'P1.8 320×160 mm'},
  {pitch:2.0, px:160, py:80,  mw:32.0, mh:16.0,   watt:16, cost:75,  brightness:1000, type:'indoor', marka:'Qiangli', name:'P2.0 320×160 mm'},
  {pitch:2.5, px:128, py:64,  mw:32.0, mh:16.0,   watt:15, cost:55,  brightness:1200, type:'indoor', marka:'Qiangli', name:'P2.5 320×160 mm'},
  {pitch:3.0, px:106, py:53,  mw:32.0, mh:16.0,   watt:14, cost:48,  brightness:1200, type:'indoor', marka:'Qiangli', name:'P3.0 320×160 mm'},
  {pitch:3.9, px:80,  py:40,  mw:32.0, mh:16.0,   watt:13, cost:38,  brightness:1100, type:'indoor', marka:'Qiangli', name:'P3.9 320×160 mm'},
  {pitch:2.0, px:160, py:80,  mw:32.0, mh:16.0,   watt:28, cost:95,  brightness:5500, type:'outdoor', marka:'Qiangli', name:'P2.0 320×160 mm IP65'},
  {pitch:2.5, px:128, py:64,  mw:32.0, mh:16.0,   watt:26, cost:72,  brightness:5500, type:'outdoor', marka:'Qiangli', name:'P2.5 320×160 mm IP65'},
  {pitch:3.0, px:106, py:53,  mw:32.0, mh:16.0,   watt:24, cost:58,  brightness:6000, type:'outdoor', marka:'Qiangli', name:'P3.0 320×160 mm IP65'},
  {pitch:4.0, px:80,  py:40,  mw:32.0, mh:16.0,   watt:22, cost:42,  brightness:5500, type:'outdoor', marka:'Qiangli', name:'P4.0 320×160 mm IP65'},
  {pitch:5.0, px:64,  py:32,  mw:32.0, mh:16.0,   watt:20, cost:34,  brightness:6500, type:'outdoor', marka:'Qiangli', name:'P5.0 320×160 mm IP65'},
  {pitch:6.67,px:48,  py:24,  mw:32.0, mh:16.0,   watt:18, cost:29,  brightness:7000, type:'outdoor', marka:'Qiangli', name:'P6.67 320×160 mm IP65'},
  {pitch:8.0, px:40,  py:20,  mw:32.0, mh:16.0,   watt:16, cost:25,  brightness:7000, type:'outdoor', marka:'Qiangli', name:'P8.0 320×160 mm IP65'},
  {pitch:10.0,px:32,  py:16,  mw:32.0, mh:16.0,   watt:14, cost:20,  brightness:7000, type:'outdoor', marka:'Qiangli', name:'P10  320×160 mm IP65'}
];

const NOVA = {
  sender:    { model:'NovaStar MCTRL300', pxCap:1_300_000, cost:450 },
  receiver:  { model:'NovaStar MRV300',   pxCap:384_000,   cost:140 },
  processor: { model:'NovaStar VX600',    pxCap:3_900_000, cost:1_200 }
};

const $ = s => document.querySelector(s);

/* ==== 2) İç/Dış değişince modül listesini yenile ==== */
$('#mekanSec').onchange = () => fillModules();
function fillModules(){
  const tip = $('#mekanSec').value;
  const modSel = $('#modul');
  modSel.innerHTML = '';
  DB.filter(m => m.type === tip).forEach((x, i) => {
    const opt = new Option(`${x.marka} ${x.pitch} mm – ${x.px}×${x.py} px – ${x.mw}×${x.mh} cm – ${x.brightness} nit`, i);
    modSel.add(opt);
  });
}

/* ==== 3) Wall ekle + NOVASTAR hesabı ==== */
let duvarlar = [];
$('#addWall').onclick = () => {
  const tip  = $('#mekanSec').value;
  const idx  = +$('#modul').value;
  const d    = DB.filter(m => m.type === tip)[idx];
  const enCm = +$('#enCm').value;
  const boyCm = +$('#boyCm').value;

  const mx = Math.ceil(enCm / d.mw);
  const my = Math.ceil(boyCm / d.mh);
  const modul = mx * my;
  const cozX = mx * d.px;
  const cozY = my * d.py;
  const toplamPx = cozX * cozY;

  const senderSayi    = Math.max(1, Math.ceil(toplamPx / NOVA.sender.pxCap));
  const recvSayi      = Math.max(1, Math.ceil(toplamPx / NOVA.receiver.pxCap));
  const processorSayi = Math.max(1, Math.ceil(toplamPx / NOVA.processor.pxCap));

  duvarlar.push({modul, cozX, cozY, bright:d.brightness, watt:modul*d.watt, maliyet:modul*d.cost,
                 senderSayi, recvSayi, processorSayi});
  hesapla();
};

/* ==== 4) SIFIRLA BUTONU ==== */
$('#resetBtn').onclick = () => {
  duvarlar = [];
  hesapla();
};

/* ==== 5) Teklif tablosunu doldur ==== */
function hesapla(){
  const tbody = $('#sumTable tbody');
  tbody.innerHTML = '';

  let topMod=0, topWatt=0, topMaliyet=0, topSender=0, topRecv=0, topProc=0, cozX=0, cozY=0, bright=0;

  duvarlar.forEach(w=>{
    topMod    += w.modul;
    topWatt   += w.watt;
    topMaliyet+= w.maliyet;
    topSender += w.senderSayi;
    topRecv   += w.recvSayi;
    topProc   += w.processorSayi;
    cozX      += w.cozX;
    cozY      += w.cozY;
    bright     = Math.max(bright, w.bright);
  });

  const satir = (adet,isim,bFiyat) => {
    if (!adet) return '';
    const tutar = adet * bFiyat;
    topMaliyet += tutar;
    return `<tr><td>${isim}</td><td>${adet}</td><td>$${bFiyat}</td><td>$${tutar}</td></tr>`;
  };
  if (topMod){
    tbody.innerHTML += satir(topMod, `LED Modül (${DB.filter(m=>m.type===$('#mekanSec').value)[0].marka})`, DB.filter(m=>m.type===$('#mekanSec').value)[0].cost);
    tbody.innerHTML += satir(topSender, NOVA.sender.model,    NOVA.sender.cost);
    tbody.innerHTML += satir(topRecv,   NOVA.receiver.model,  NOVA.receiver.cost);
    tbody.innerHTML += satir(topProc,   NOVA.processor.model, NOVA.processor.cost);
  }
  $('#grandTotal').textContent = '$' + topMaliyet.toLocaleString();
}

$('#printBtn').onclick = () => window.print();

/* ilk yükleme */
fillModules();
hesapla();
</script>
</body>
</html>
